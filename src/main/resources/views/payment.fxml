<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/23"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.rental.controller.PaymentController"
            prefHeight="700.0" prefWidth="1000.0"
            styleClass="main-border-pane">

    <!-- ToggleGroup -->
    <fx:define>
        <ToggleGroup fx:id="paymentGroup"/>
    </fx:define>

    <top>
        <fx:include source="header.fxml"/>
    </top>

    <left>
        <fx:include source="sidebarTenant.fxml"/>
    </left>

    <center>

        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="page-scroll-pane">
            <content>
                <VBox spacing="20.0" styleClass="payment-page-container">
                    <padding>
                        <Insets top="20" right="40" bottom="20" left="40"/>
                    </padding>
                       <!-- ðŸ”¹ à¸à¸²à¸£à¹Œà¸”à¸«à¸±à¸§à¸‚à¹‰à¸­ -->
                      <StackPane styleClass="page-header-card">
                      <Label text="à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¸„à¹ˆà¸²à¹€à¸Šà¹ˆà¸²"
                      styleClass="page-header-title"/>
                     </StackPane>

                    <!-- ðŸ”¹ Summary Card -->
                    <VBox styleClass="section-card">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <Label text="à¸ªà¸£à¸¸à¸›à¸£à¸²à¸¢à¸à¸²à¸£à¸ˆà¸­à¸‡" styleClass="section-header"/>

                        <HBox spacing="10">
                            <Label text="à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸—à¸µà¹ˆà¸ˆà¸­à¸‡à¸„à¸¸à¸“"
                             styleClass="summary-subtitle"/>
                        </HBox>
                        <Label text="à¸«à¸¡à¸²à¸¢à¹€à¸¥à¸‚à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ : A01" styleClass="summary-label-key"/>
                        <Label text="à¸‚à¸™à¸²à¸”à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ : 3 x 3 à¹€à¸¡à¸•à¸£" styleClass="summary-label-key"/>

                        <Label text="à¸›à¸£à¸°à¹€à¸ à¸—à¸ªà¸´à¸™à¸„à¹‰à¸²: à¸­à¸²à¸«à¸²à¸£" styleClass="summary-label-key"/>
                        <Separator/>

                        <GridPane hgap="10" vgap="5">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="70"/>
                                <ColumnConstraints percentWidth="30" halignment="RIGHT"/>
                            </columnConstraints>

                            <Label text="à¸„à¹ˆà¸²à¹€à¸Šà¹ˆà¸²"/>
                            <Label fx:id="lblRentFee" text="150 à¸¿" GridPane.columnIndex="1"/>

                            <Label text="à¸„à¹ˆà¸²à¸¡à¸±à¸”à¸ˆà¸³" GridPane.rowIndex="1"/>
                            <Label fx:id="lblDeposit" text="0 à¸¿"
                                   GridPane.columnIndex="1"
                                   GridPane.rowIndex="1"/>

                            <Label text="à¸¢à¸­à¸”à¸Šà¸³à¸£à¸°à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"
                                   styleClass="total-label"
                                   GridPane.rowIndex="2"/>
                            <Label fx:id="lblTotalAmount"
                                   text="150 à¸¿"
                                   styleClass="total-label"
                                   GridPane.columnIndex="1"
                                   GridPane.rowIndex="2"/>
                        </GridPane>
                    </VBox>

                    <!-- ðŸ”¹ Main Content -->
                    <HBox spacing="25">

                        <!-- LEFT -->
                        <VBox spacing="15" prefWidth="350">

                            <!-- ðŸ”§ Payment Type -->
                            <VBox spacing="10" styleClass="section-card">
                                <padding>
                                    <Insets top="15" right="15" bottom="15" left="15"/>
                                </padding>

                                <Label text="à¸›à¸£à¸°à¹€à¸ à¸—à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™" styleClass="section-header"/>

                                <RadioButton fx:id="radioBank"
                                             text="à¹‚à¸­à¸™à¸œà¹ˆà¸²à¸™à¸˜à¸™à¸²à¸„à¸²à¸£"
                                             toggleGroup="$paymentGroup"
                                             selected="true"
                                             styleClass="radio-item"/> <!-- ðŸ”§ -->

                                <RadioButton fx:id="radioQR"
                                             text="QR à¸žà¸£à¹‰à¸­à¸¡à¹€à¸žà¸¢à¹Œ"
                                             toggleGroup="$paymentGroup"
                                             styleClass="radio-item"/> <!-- ðŸ”§ -->
                            </VBox>

                            <!-- ðŸ”§ Upload -->
                            <VBox spacing="10" styleClass="section-card">
                                <padding>
                                    <Insets top="15" right="15" bottom="15" left="15"/>
                                </padding>

                                <Label text="à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸«à¸¥à¸±à¸à¸à¸²à¸™à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™" styleClass="section-header"/>

                                <Button fx:id="btnUpload"
                                        text="à¹€à¸¥à¸·à¸­à¸à¹„à¸Ÿà¸¥à¹Œ â‡©"
                                        onAction="#handleUpload"
                                        styleClass="btn-outline"/> <!-- ðŸ”§ -->

                                <Label fx:id="lblFileStatus" text="à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸¥à¸·à¸­à¸à¹„à¸Ÿà¸¥à¹Œ"/>

                                <Label text="à¸§à¸±à¸™/à¹€à¸”à¸·à¸­à¸™/à¸›à¸µ à¸—à¸µà¹ˆà¸—à¸³à¸£à¸²à¸¢à¸à¸²à¸£"/>
                                <DatePicker fx:id="datePicker"
                                            maxWidth="Infinity"
                                            styleClass="input-field"/> <!-- ðŸ”§ -->

                                <Label text="à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸ (à¸–à¹‰à¸²à¸¡à¸µ)"/>
                                <TextArea fx:id="txtNote"
                                          prefRowCount="3"
                                          wrapText="true"
                                          styleClass="input-field"/> <!-- ðŸ”§ -->
                            </VBox>
                        </VBox>

                        <!-- RIGHT -->
                        <StackPane HBox.hgrow="ALWAYS">

                            <!-- ðŸ”§ Bank Card -->
                            <VBox fx:id="bankDetails"
      spacing="14"
      styleClass="section-card">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- à¸«à¸±à¸§à¸‚à¹‰à¸­ -->
    <Label text="à¹‚à¸­à¸™à¸œà¹ˆà¸²à¸™à¸˜à¸™à¸²à¸„à¸²à¸£ (Bank Transfer)"
           styleClass="section-header"/>
           <Label text="à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸šà¸±à¸à¸Šà¸µà¸‚à¸­à¸‡à¸•à¸¥à¸²à¸”"/>

    <Label text="à¸à¸£à¸¸à¸“à¸²à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™à¹€à¸‚à¹‰à¸²à¸šà¸±à¸à¸Šà¸µà¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡"
           styleClass="section-subtext"/>

    <!-- à¸à¸²à¸£à¹Œà¸”à¸˜à¸™à¸²à¸„à¸²à¸£à¸—à¸µà¹ˆ 1 -->
    <HBox spacing="12" styleClass="bank-card">

        <StackPane styleClass="bank-icon">
            <Label text="ðŸ¦"/>
        </StackPane>

        <VBox spacing="4">
            <Label text="à¸˜à¸™à¸²à¸„à¸²à¸£à¸à¸ªà¸´à¸à¸£à¹„à¸—à¸¢" styleClass="bank-name"/>
            <Label text="à¸Šà¸·à¹ˆà¸­à¸šà¸±à¸à¸Šà¸µ : à¸•à¸¥à¸²à¸”à¸™à¸±à¸”à¸Šà¸¸à¸¡à¸Šà¸™ à¸ˆà¸³à¸à¸±à¸”"/>
            <Label text="123-4-56789-0"/>
            <Label text="à¸›à¸£à¸°à¹€à¸ à¸—à¸šà¸±à¸à¸Šà¸µ : à¸­à¸­à¸¡à¸—à¸£à¸±à¸žà¸¢à¹Œ"/>
        </VBox>
    </HBox>

    <!-- à¸à¸²à¸£à¹Œà¸”à¸˜à¸™à¸²à¸„à¸²à¸£à¸—à¸µà¹ˆ 2 -->
    <HBox spacing="12" styleClass="bank-card">

        <StackPane styleClass="bank-icon">
            <Label text="ðŸ¦"/>
        </StackPane>

        <VBox spacing="4">
            <Label text="à¸˜à¸™à¸²à¸„à¸²à¸£à¸à¸£à¸¸à¸‡à¹„à¸—à¸¢" styleClass="bank-name"/>
            <Label text="à¸Šà¸·à¹ˆà¸­à¸šà¸±à¸à¸Šà¸µ : à¸•à¸¥à¸²à¸”à¸™à¸±à¸”à¸Šà¸¸à¸¡à¸Šà¸™ à¸ˆà¸³à¸à¸±à¸”"/>
            <Label text="123-4-56789-0"/>
            <Label text="à¸›à¸£à¸°à¹€à¸ à¸—à¸šà¸±à¸à¸Šà¸µ : à¸­à¸­à¸¡à¸—à¸£à¸±à¸žà¸¢à¹Œ"/>
        </VBox>
    </HBox>

    <Label text="*à¸«à¸¥à¸±à¸‡à¹‚à¸­à¸™à¸à¸£à¸¸à¸“à¸²à¹à¸™à¸šà¸ªà¸¥à¸´à¸›à¹€à¸žà¸·à¹ˆà¸­à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™"
           styleClass="hint-text"/>
</VBox>

                        <!-- QR -->
<VBox fx:id="qrDetails"
      spacing="14"
      visible="false"
      managed="false"
      styleClass="section-card">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <Label text="QR à¸žà¸£à¹‰à¸­à¸¡à¹€à¸žà¸¢à¹Œ" styleClass="qr-title"/>
    <Label text="à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸šà¸±à¸à¸Šà¸µà¸‚à¸­à¸‡à¸•à¸¥à¸²à¸”"/>
    
    <Label text="à¸à¸£à¸¸à¸“à¸²à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™à¹€à¸‚à¹‰à¸²à¸šà¸±à¸à¸Šà¸µà¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡"
       styleClass="qr-subtitle"/>


    <Separator/>

    <!-- â­ à¸à¸¥à¹ˆà¸­à¸‡à¸à¸¥à¸²à¸‡ QR + à¸›à¸¸à¹ˆà¸¡ -->
    <VBox alignment="CENTER"
          spacing="12"
          styleClass="qr-center">

        <ImageView
            fx:id="qrImageView"
            fitWidth="220"
            preserveRatio="true">
            <image>
                <Image url="@../images/Qrcode.png"/>
            </image>
        </ImageView>

        <Button
            fx:id="btnDownloadQr"
            text="à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸” QR"
            onAction="#handleDownloadQr"
            visible="false"
            managed="false"
            styleClass="primary"/>

    </VBox>

    <Label text="*à¸«à¸¥à¸±à¸‡à¹‚à¸­à¸™à¸à¸£à¸¸à¸“à¸²à¹à¸™à¸šà¸ªà¸¥à¸´à¸›à¹€à¸žà¸·à¹ˆà¸­à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™"
       styleClass="qr-note"/>

</VBox>


                        </StackPane>
                    </HBox>

                    <!-- ðŸ”§ Bottom Buttons -->
                    <HBox spacing="10" alignment="BOTTOM_RIGHT">
                        <Button text="à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™"
                                onAction="#handleSave"
                                styleClass="btn-primary"/> <!-- ðŸ”§ -->
                        <Button text="à¸¥à¹‰à¸²à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"
                                onAction="#handleClear"
                                styleClass="btn-secondary"/> <!-- ðŸ”§ -->
                    </HBox>

                </VBox>
            </content>
        </ScrollPane>
    </center>

</BorderPane>
