<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.rental.controller.BookingManagementController"
            style="-fx-background-color: #f4f6f9;">

    <!-- ===== Header ด้านบน ===== -->
    <top>
        <fx:include fx:id="header" source="header.fxml"/>
    </top>

    <!-- ===== Sidebar ด้านซ้าย ===== -->
    <left>
        <fx:include fx:id="menu" source="/views/sidebaradmin.fxml"/>
    </left>

    <!-- ===== Center Content ===== -->
    <center>
        <VBox spacing="25" VBox.vgrow="ALWAYS">
            <padding>
                <Insets top="30" right="40" bottom="40" left="40"/>
            </padding>

            <!-- ===== หัวข้อหลัก ===== -->
            <Label text="จัดการการจอง"
                   style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #212529;">
                <font>
                    <Font name="System Bold" size="28"/>
                </font>
            </Label>

            <!-- ===== Filter Card ===== -->
            <VBox spacing="20"
                  style="-fx-background-color: white;
                         -fx-background-radius: 12;
                         -fx-padding: 25;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 4);
                         -fx-border-color: #e9ecef;
                         -fx-border-radius: 12;">

                <!-- Row 1: ค้นหา + Filters -->
                <HBox spacing="20" alignment="CENTER_LEFT">
                    <Label text="ค้นหา:" style="-fx-font-weight: bold; -fx-font-size: 14; -fx-text-fill: #495057;"/>
                    <TextField fx:id="searchField"
                               promptText="ชื่อลูกค้า, เบอร์โทร หรือ โซน"
                               prefWidth="280"
                               style="-fx-background-radius: 8; -fx-padding: 10;"/>

                    <Label text="โซน:" style="-fx-font-weight: bold; -fx-font-size: 14; -fx-text-fill: #495057;"/>
                    <ComboBox fx:id="zoneCombo"
                              promptText="ทุกโซน"
                              prefWidth="140"
                              style="-fx-background-radius: 8;"/>

                    <Label text="ช่องทาง:" style="-fx-font-weight: bold; -fx-font-size: 14; -fx-text-fill: #495057;"/>
                    <ComboBox fx:id="paymentCombo"
                              promptText="ทุกช่องทาง"
                              prefWidth="180"
                              style="-fx-background-radius: 8;"/>

                    <Label text="วันที่:" style="-fx-font-weight: bold; -fx-font-size: 14; -fx-text-fill: #495057;"/>
                    <DatePicker fx:id="datePicker"
                                prefWidth="160"
                                style="-fx-background-radius: 8;"/>
                </HBox>

                <!-- Row 2: Reset + Sort -->
                <HBox spacing="15" alignment="CENTER_LEFT">
                    <Button fx:id="resetBtn"
                            text="รีเซ็ต"
                            prefWidth="150"
                            prefHeight="42"
                            style="-fx-background-color: #6c757d; 
                                   -fx-text-fill: white; 
                                   -fx-font-weight: bold;
                                   -fx-background-radius: 10;
                                   -fx-cursor: hand;">
                        <graphic>
                            <Label text="↺" style="-fx-font-size: 16; -fx-text-fill: white;"/>
                        </graphic>
                    </Button>

                    <Region HBox.hgrow="ALWAYS"/>

                    <ComboBox fx:id="sortCombo"
                              promptText="จัดเรียงตาม"
                              prefWidth="220"
                              style="-fx-background-radius: 10;"/>

                    <Button fx:id="sortBtn"
                            text="จัดเรียง"
                            prefWidth="140"
                            prefHeight="42"
                            style="-fx-background-color: #0d6efd; 
                                   -fx-text-fill: white; 
                                   -fx-font-weight: bold;
                                   -fx-background-radius: 10;
                                   -fx-cursor: hand;">
                        <graphic>
                            <Label text="↓↑" style="-fx-font-size: 16; -fx-text-fill: white;"/>
                        </graphic>
                    </Button>
                </HBox>
            </VBox>

            <!-- ===== Table Section ===== -->
            <VBox spacing="12">
                <Label text="รายการชำระเงินทั้งหมด"
                       style="-fx-font-size: 20; -fx-font-weight: bold; -fx-text-fill: #343a40;"/>

                <TableView fx:id="bookingTable"
                           VBox.vgrow="ALWAYS"
                           style="-fx-background-color: white;
                                  -fx-background-radius: 12;
                                  -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 8, 0, 0, 3);
                                  -fx-border-radius: 12;">

                  <columns>
    <TableColumn fx:id="colName"
                 text="ชื่อ-สกุลลูกค้า"
                 prefWidth="220"
                 style="-fx-alignment: CENTER_LEFT;"/>

    <TableColumn fx:id="colDate"
                 text="วันที่ชำระเงิน"
                 prefWidth="150"
                 style="-fx-alignment: CENTER;"/>

    <TableColumn fx:id="colZone"
                 text="โซน"
                 prefWidth="100"
                 style="-fx-alignment: CENTER;"/>

    <!-- ✅ เพิ่มใหม่ -->
    <TableColumn fx:id="colStartDate"
                 text="วันที่เริ่มเช่า"
                 prefWidth="140"
                 style="-fx-alignment: CENTER;"/>

    <TableColumn fx:id="colEndDate"
                 text="วันที่สิ้นสุด"
                 prefWidth="140"
                 style="-fx-alignment: CENTER;"/>

    <TableColumn fx:id="colPayment"
                 text="ช่องทางการชำระเงิน"
                 prefWidth="180"
                 style="-fx-alignment: CENTER_LEFT;"/>

    <TableColumn fx:id="colStatus"
                 text="สถานะการยืนยัน"
                 prefWidth="160"
                 style="-fx-alignment: CENTER;"/>
</columns>


                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                </TableView>

                
            </VBox>
        </VBox>
    </center>
</BorderPane>